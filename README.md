# Element Clip - DOM要素コピペツール

WebページからDOM要素を指定して値を抽出し、別のWebページで貼り付けるChrome拡張機能です。
複雑なフォーム入力やデータ移行作業を効率化します。

## 主な機能

- 📋 **変数管理**: 複数の変数を定義し、名前をつけて管理
- 🎯 **要素選択**: クリックでDOM要素を直感的に選択（右クリックでキャンセル）
- 📁 **テンプレート機能**: 変数構成をテンプレートとして保存し、サイトごとに切り替え可能
- 📥 **値の抽出**: 指定したCSSセレクタから値を抽出（テキスト、Value、属性など）
- 📤 **値の貼り付け**: 抽出した値を別のページに貼り付け
- 💾 **セット管理**: 抽出した値のセットを保存・履歴管理（テーブル表示対応）
- ⚡ **一括操作**: すべての変数を一括で抽出・貼り付け
- 🔍 **セレクタ確認**: 設定したセレクタが正しい要素を指しているかハイライト表示で確認

## インストール方法

### 開発者モードでインストール

1. Chrome ブラウザを開く
2. アドレスバーに `chrome://extensions/` と入力
3. 右上の「デベロッパーモード」を有効化
4. 「パッケージ化されていない拡張機能を読み込む」をクリック
5. このプロジェクトのフォルダ (`element_clip`) を選択

## 使い方

### 1. 変数を追加・設定

1. Chrome のサイドパネルで「Element Clip」を開く
2. 「新しい変数を追加」ボタンをクリック
3. **変数名**を入力（例: ユーザー名）
4. **抽出元**: 「要素を選択」ボタンをクリックし、Webページ上で要素をクリック
   - 右クリックで選択モードをキャンセルできます
5. **抽出タイプ**: value, text, attribute, innerHTML から選択
6. **貼り付け先**（任意）: 貼り付け用のセレクタを別途設定可能
   - 「セレクタ確認」ボタンで、現在選択されている要素をハイライト確認できます
7. 「保存」をクリック

### 2. テンプレートの活用

サイトや用途に合わせて変数の構成（セットアップ）を保存できます。

1. 変数を作成後、変数一覧ヘッダーの「📂 テンプレート」ボタンをクリック
2. テンプレート名を入力して「保存」
3. 別の構成に切り替える際は、リストから「読込」をクリック（現在の構成は上書きされます）

### 3. 値の抽出・貼り付け

**個別の操作:**
- 各変数の「抽出」「貼付」ボタンを使用します。
- 貼り付け先が未設定の場合、貼り付け時にクリックで要素を選択できます。

**一括操作:**
- 「一括抽出」: 定義されたすべての変数について、現在のページから値を抽出します。
- 「一括貼り付け」: 抽出された値を、現在のページの対応する要素（貼り付け先セレクタ）に入力します。

### 4. データの保存（セット管理）

1. 値を抽出した後、「変数セット保存」をクリック
2. セット名を入力して保存
3. 保存されたセットは「保存済みセット」リストに表示されます
4. 「一覧表示」ボタンで、テーブル形式で過去のデータを閲覧・管理できます

## プロジェクト構造

```
element_clip/
├── manifest.json          # 拡張機能の設定ファイル
├── background.js          # バックグラウンド処理
├── content.js             # ページ内インタラクション制御
├── overlay.js             # オーバーレイ・ハイライト表示処理
├── utils.js               # 汎用ユーティリティ関数
├── store.js               # データ管理（Storage API連携）
├── sidepanel.html         # サイドパネルのHTML構造
├── sidepanel.js           # サイドパネルのメインコントローラ
├── sidepanel.css          # スタイルシート
├── ui-variables.js        # 変数UIのロジック
├── ui-sets.js             # セットUIのロジック
├── ui-templates.js        # テンプレートUIのロジック
├── icons/                 # アイコン
└── tests/                 # テストコード
```

## 技術スタック

- **Manifest Version**: V3
- **言語**: JavaScript (ES6+ Modules分離)
- **スタイリング**: Vanilla CSS
- **ストレージ**: Chrome Storage API
- **UI**: Chrome Side Panel API

## バージョン履歴

- **1.4.7** (2025-12-14): 変数構成テンプレート機能の追加
- **1.4.6** (2025-12-14): コードリファクタリング（機能ごとのファイル分割）
- **1.4.5**: 要素選択のキャンセル操作をEscapeキーから右クリックに変更
- **1.4.3**: セレクタ確認機能（要素ハイライト）の追加
- **1.4.0**: 保存済みセットのテーブル表示機能追加
- **1.3.x**: 貼り付け機能の強化、UI改善
- **1.0.0**: 初回リリース

## ライセンス

MIT License
